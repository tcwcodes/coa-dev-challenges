(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(t,e,a){t.exports=a(78)},38:function(t,e,a){},58:function(t,e,a){},78:function(t,e,a){"use strict";a.r(e);var n=a(0),l=a.n(n),r=a(25),c=a.n(r),s=(a(38),a(9)),o=a(26),i=a(27),d=a(31),u=a(28),m=a(30),h=a(3),E=a(12),b=a.n(E),v=function(t){var e=t.stats,a=t.dateStartFormatted,n=t.dateEndFormatted;return l.a.createElement("div",null,l.a.createElement("h2",null,"Statistics"),l.a.createElement("h4",null,a," to ",n),l.a.createElement("h4",null,l.a.createElement("strong",null,"Total trips: "),e.totalTrips),l.a.createElement("h4",null,l.a.createElement("strong",null,"Total miles: "),e.totalMiles),l.a.createElement("h4",null,l.a.createElement("strong",null,"Total unique units: "),e.totalUnits))},g=(a(58),a(29)),f=a.n(g),O=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).state={dateStart:"",dateEnd:"",dateStartFormatted:"",dateEndFormatted:"",stats:{},loading:!1,submitted:!1},a.selectStartDate=a.selectStartDate.bind(Object(h.a)(Object(h.a)(a))),a.selectEndDate=a.selectEndDate.bind(Object(h.a)(Object(h.a)(a))),a.convertDate=a.convertDate.bind(Object(h.a)(Object(h.a)(a))),a.queryPortal=a.queryPortal.bind(Object(h.a)(Object(h.a)(a))),a.calculateTotalMiles=a.calculateTotalMiles.bind(Object(h.a)(Object(h.a)(a))),a.calculateTotalUnits=a.calculateTotalUnits.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){}},{key:"selectStartDate",value:function(t){this.convertDate(t,"dateStart")}},{key:"selectEndDate",value:function(t){this.convertDate(t,"dateEnd")}},{key:"convertDate",value:function(t,e){var a,n,l=t.getYear()+1900,r=t.getMonth()+1,c=t.getDate(),o="";r<10&&c<10?(r="0"+r,c="0"+c):r<10&&c>9?r="0"+r:r>9&&c<10&&(c="0"+c),o="dateStart"===e?l+"-"+r+"-"+c+"T00:00:00.000":l+"-"+r+"-"+c+"T23:59:59.999",n=r+"-"+c+"-"+l,this.setState((a={},Object(s.a)(a,e,o),Object(s.a)(a,e+"Formatted",n),Object(s.a)(a,"submitted",!1),a))}},{key:"calculateTotalMiles",value:function(t){var e,a=0;return t.forEach(function(t){a+=parseInt(t.trip_distance)}),e=621371e-9*a,Math.round(e)}},{key:"calculateTotalUnits",value:function(t){var e=[];return t.forEach(function(t){e.includes(t.device_id)||e.push(t.device_id)}),e.length}},{key:"queryPortal",value:function(){var t=this;this.setState({submitted:!0,loading:!0});var e=this.state.dateStart,a=this.state.dateEnd;if(e&&a)if(e>a)console.log("Please choose a start date prior to your chosen end date.");else{var n="$where="+("start_time between '"+e+"' and '"+a)+"' AND "+("end_time between '"+e+"' and '"+a)+"'";f()({method:"get",url:"https://data.austintexas.gov/resource/7d8e-dm7r.json?$limit=1000000&"+n,headers:{"X-App-Token":"OKLYqKegeOGOIG08OM1K7EEHV"}}).then(function(e){console.log(e);var a={totalTrips:e.data.length,totalMiles:t.calculateTotalMiles(e.data),totalUnits:t.calculateTotalUnits(e.data)};t.setState({stats:a,loading:!1}),console.log(t.state)})}else console.log("Please select starting and ending dates (even if they are the same).")}},{key:"render",value:function(){var t,e=this.state.stats.totalTrips,a=this.state.loading,n=this.state.submitted;return console.log(n),t=e&&!1===a&&!0===n?l.a.createElement(v,{stats:this.state.stats,dateStartFormatted:this.state.dateStartFormatted,dateEndFormatted:this.state.dateEndFormatted}):!0===a?l.a.createElement("h2",null,"Loading statistics. Be with you in a moment!"):l.a.createElement("h2",null,"Select start and end dates to see statistics."),l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement("h1",null,"Dockless Mobility Usage"),l.a.createElement("br",null)),l.a.createElement("div",null,t,l.a.createElement("br",null)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"Calendar"},l.a.createElement("h4",null,"Start date"),l.a.createElement(b.a,{onChange:this.selectStartDate})),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"Calendar"},l.a.createElement("h4",null,"End date"),l.a.createElement(b.a,{onChange:this.selectEndDate})),l.a.createElement("br",null))),l.a.createElement("div",null,l.a.createElement("button",{onClick:this.queryPortal},"Submit")),l.a.createElement("br",null))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.e1cdfe1b.chunk.js.map